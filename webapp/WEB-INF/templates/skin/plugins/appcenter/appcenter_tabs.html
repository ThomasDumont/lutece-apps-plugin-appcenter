<#macro tabs2 tab application errors infos user >

<div class="jumbotron">
	<h1 class="display-3">${application.name}</h1>
	<p class="lead">${application.description}</p>
	<hr class="my-4">
	<p class="lead">
		<a class="btn btn-primary pull-right" href="jsp/site/Portal.jsp?page=application" title="Mes applications">
				<span class="fa fa-home"></span>   
		</a>
		<#if user.admin>
		<button type="button" class="btn btn-primary pull-right" data-toggle="modal" data-target="#ModalModify" title="#i18n{appcenter.modify_application.buttonModifyAppDescription}">
			<span class="fa fa-edit"></span>
		</button>
		<button type="button" class="btn btn-primary pull-right" data-toggle="modal" data-target="#ModalAddUser" title="#i18n{appcenter.modify_application.buttonAddUser}">
			<span class="fa fa-user-plus"></span>
		</button>
		<a class="btn btn-danger pull-right" href="jsp/site/Portal.jsp?page=application&action=confirmRemoveApplication&id=${application.id}" title="#i18n{portal.util.labelDelete}">
				<span class="fa fa-trash"></span>
		</a>
		</#if>
	</p>
</div>
<br>    
<@messages errors=errors />
<@messages infos=infos />

<ul class="nav nav-tabs">
  <li class="nav-item">
		<a class="nav-link<#if tab="general"> active</#if>" href="jsp/site/Portal.jsp?page=application&view=modifyApplication&id=${application.id}">#i18n{appcenter.tabs.general}</a>
	</li>
	<li class="nav-item">
		<a class="nav-link<#if tab="sources"> active</#if>" href="jsp/site/Portal.jsp?page=sources&id=${application.id}">#i18n{appcenter.tabs.sources}</a>
	</li>
  <li class="nav-item">
		<a class="nav-link<#if tab="openam"> active</#if>" href="jsp/site/Portal.jsp?page=openam&id=${application.id}">#i18n{appcenter.tabs.openam}</a>
	</li>
  <li class="nav-item">
		<a class="nav-link<#if tab="moncompte_settings"> active</#if>" href="jsp/site/Portal.jsp?page=moncomptesettings&id=${application.id}">#i18n{appcenter.tabs.moncomptesettings}</a>
	</li>
</ul>
</#macro>


<!-- Modal -->
<div id="ModalModify" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<!-- Modal content-->
		<div class="modal-content">
				<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">#i18n{appcenter.modify_application.modalTitleModifyAppDescription}</h4>
				</div>
				<div class="modal-body">
						<@tform class='form-horizontal' action='jsp/site/Portal.jsp?page=application'>
						<fieldset>
								<input type="hidden" id="id" name="id" value="${application.id}"/>

								<@formGroup labelFor='name' labelKey='#i18n{appcenter.modify_application.labelName}' mandatory=true>
										<@input type='text' id='name' name='name'  maxlength=50 value='${application.name}' tabIndex='0' />
								</@formGroup>
								<@formGroup labelFor='description' labelKey='#i18n{appcenter.modify_application.labelDescription}' mandatory=true>
										<@input type='text' id='description' name='description'  maxlength=255 value='${application.description}' tabIndex='1' />
								</@formGroup>

								<@formGroup>
										<@button name='action_modifyApplication' type='submit' tabIndex='3' title='#i18n{portal.util.labelModify}' buttonIcon='edit' />
								</@formGroup>
						</fieldset>
						</@tform>
				</div>
				<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">#i18n{portal.util.labelCancel}</button>
				</div>
		</div>
	</div>
</div>
    
        <!-- Modal -->
    <div id="ModalAddUser" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">#i18n{appcenter.modify_application.modalTitleAddUser}</h4>
                </div>
                <div class="modal-body">
                    <div>
                        <h2><span class="fa fa-user"></span>&nbsp; #i18n{appcenter.modify_application.titleAuthorizedUsers}</h2>
                        <ul>
                        <#list application.authorizations as userAuthorized>
                            <li>
                                ${userAuthorized.userId} (${userAuthorized.userRoleName})
                            <#if user.admin>
                            <a class="btn btn-xs btn-danger" href='jsp/site/Portal.jsp?page=application&action=removeUser&id=${application.id}&user_email=${userAuthorized.userId}'>
                                <span class="fa fa-trash"></span> #i18n{portal.util.labelDelete}
                            </a> 
                            </#if>    
                            </li>
                        </#list>
                        </ul>
                    </div>
                    
                    <@tform class='form-horizontal' action='jsp/site/Portal.jsp?page=application'>
                    <fieldset>

                        <input type="hidden" id="id" name="id" value="${application.id}"/>

                        <@formGroup labelFor='user_email' labelKey='#i18n{appcenter.modify_application.labelUserEmail}' mandatory=true>
                            <@input type='text' id='user_email' name='user_email'  maxlength=50 value='' tabIndex='0' />
                        </@formGroup>
                        <@formGroup labelFor='user_role' labelKey='#i18n{appcenter.modify_application.labelRole}' mandatory=true>
                            <@select id='user_role' name='user_role' items=roles_list default_value=default_role />
                        </@formGroup>

                        <@formGroup>
                            <@button name='action_addUser' type='submit' tabIndex='3' title='#i18n{appcenter.modify_application.buttonAdd}' buttonIcon='plus' />
                        </@formGroup>
                    </fieldset>
                    </@tform>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">#i18n{portal.util.labelCancel}</button>
                </div>
            </div>
        </div>
    </div>

    