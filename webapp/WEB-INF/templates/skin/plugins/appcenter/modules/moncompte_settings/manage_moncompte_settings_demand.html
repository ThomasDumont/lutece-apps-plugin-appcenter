<#include "../commons.html" />
<#include "../../appcenter_tabs.html" />
<@tabs2 tab="moncompte_settings" application=application errors=errors infos=infos />

<h1>#i18n{appcenter.manage_moncompte_settings.title}</h1>

 <div class="well">
    <@messages infos=infos />
    <@tform action='jsp/site/Portal.jsp?page=moncomptesettings&id=${application.id}'>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalMonCompteSettingDemand">
        #i18n{appcenter.manage_moncompte_settings.buttonAdd}
    </button>
    </@tform>

    <h2>#i18n{appcenter.manage_moncompte_settings.list_setting_title}</h2>

    <@table>
        <tr>
            <input type="hidden" id="id" name="id"/>
            <th>#i18n{appcenter.manage_moncompte_settings.columnEnvironment}</th>
            <th>#i18n{appcenter.manage_moncompte_settings.columnFavoriteName}</th>
            <th>#i18n{appcenter.manage_moncompte_settings.columnFavoriteUrl}</th>
            <th>#i18n{appcenter.manage_moncompte_settings.columnBackButtonName}</th>
            <th>#i18n{appcenter.manage_moncompte_settings.columnBackButtonUrl}</th>
        </tr>
        <#if data??>
            <#list data as setting >
            <tr>
                <input type="hidden" id="id" name="id" />
                <td>
                    ${setting.environment}
                </td>
                <td>
                    ${setting.favoriteName}
                </td>
                <td>
                    ${setting.favoriteUrl}
                </td>
                <td>
                    ${setting.backButtonName}
                </td>
                <td>
                    ${setting.backButtonUrl}
                </td>
            </tr>
            </#list>
        </#if>
    </@table>

    <h2>#i18n{appcenter.manage_moncompte_settings.list_demand_title}</h2>
    
    <@printDemands demands demands_states demands_histories/>

</div>
    
 <!-- Modal for demanding OpenAM agent -->
    <div id="ModalMonCompteSettingDemand" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">#i18n{appcenter.create_moncompte_settings.title}</h4>
                </div>
                <div class="modal-body">
                    <@tform action='jsp/site/Portal.jsp?page=moncomptesettings&id=${application.id}&action=doCreateMonCompteSettingsDemand'>
                        <@formGroup labelKey='#i18n{appcenter.create_moncompte_settings.labelEnvironment}' labelFor='environment'>
                            <@select name='environment' id='environment' items=environment default_value='' />
                        </@formGroup>
                        <@formGroup labelKey='#i18n{appcenter.create_moncompte_settings.labelFavoriteName}' labelFor='name_favorite'>
                            <@input type='text' id='favoriteName' name='favoriteName'  maxlength=250 tabIndex='0' />
                        </@formGroup>
                        <@formGroup labelKey='#i18n{appcenter.create_moncompte_settings.labelFavoriteUrl}' labelFor='url_favorite'>
                            <@input type='text' id='favoriteUrl' name='favoriteUrl'  maxlength=250 tabIndex='0' />
                        </@formGroup>
                        <@formGroup labelKey='#i18n{appcenter.create_moncompte_settings.labelBackButtonName}' labelFor='name_back_button'>
                            <@input type='text' id='backButtonName' name='backButtonName'  maxlength=250 tabIndex='0' />
                        </@formGroup>
                        <@formGroup labelKey='#i18n{appcenter.create_moncompte_settings.labelBackButtonUrl}' labelFor='url_back_button'>
                            <@input type='text' id='backButtonUrl' name='backButtonUrl'  maxlength=250 tabIndex='0' />
                        </@formGroup>
                        <@formGroup>
                            <@button type='submit' name='action_createSetting' title='#i18n{appcenter.create_moncompte_settings.buttonCreate}' />
                        </@formGroup>
                    </@tform>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">#i18n{portal.util.labelCancel}</button>
                </div>
            </div>
        </div>
    </div>

